CREATE TABLE [dbo].[Stories] (
    [ID] [int] NOT NULL IDENTITY,
    [Title] [nvarchar](max) NOT NULL,
    [Content] [nvarchar](max),
    [DateCreated] [datetime] NOT NULL,
    [DateLastModified] [datetime] NOT NULL,
    [StoryTypeID] [int] NOT NULL,
    CONSTRAINT [PK_dbo.Stories] PRIMARY KEY ([ID])
)
CREATE INDEX [IX_StoryTypeID] ON [dbo].[Stories]([StoryTypeID])
CREATE TABLE [dbo].[StoryFeedbacks] (
    [ID] [int] NOT NULL IDENTITY,
    [StoryID] [int] NOT NULL,
    [Rating] [int] NOT NULL,
    [Comment] [nvarchar](max),
    [DateCreated] [datetime] NOT NULL,
    [DateLastModified] [datetime] NOT NULL,
    CONSTRAINT [PK_dbo.StoryFeedbacks] PRIMARY KEY ([ID])
)
CREATE INDEX [IX_StoryID] ON [dbo].[StoryFeedbacks]([StoryID])
CREATE TABLE [dbo].[StoryTypes] (
    [ID] [int] NOT NULL IDENTITY,
    [Name] [nvarchar](max),
    CONSTRAINT [PK_dbo.StoryTypes] PRIMARY KEY ([ID])
)
CREATE TABLE [dbo].[Topics] (
    [ID] [int] NOT NULL IDENTITY,
    [Name] [nvarchar](450),
    CONSTRAINT [PK_dbo.Topics] PRIMARY KEY ([ID])
)
CREATE UNIQUE INDEX [UniqueIndex] ON [dbo].[Topics]([Name])
CREATE TABLE [dbo].[SubTopics] (
    [ID] [int] NOT NULL IDENTITY,
    [Name] [nvarchar](max),
    [TopicID] [int] NOT NULL,
    CONSTRAINT [PK_dbo.SubTopics] PRIMARY KEY ([ID])
)
CREATE INDEX [IX_TopicID] ON [dbo].[SubTopics]([TopicID])
CREATE TABLE [dbo].[TopicStories] (
    [Topic_ID] [int] NOT NULL,
    [Story_ID] [int] NOT NULL,
    CONSTRAINT [PK_dbo.TopicStories] PRIMARY KEY ([Topic_ID], [Story_ID])
)
CREATE INDEX [IX_Topic_ID] ON [dbo].[TopicStories]([Topic_ID])
CREATE INDEX [IX_Story_ID] ON [dbo].[TopicStories]([Story_ID])
ALTER TABLE [dbo].[Stories] ADD CONSTRAINT [FK_dbo.Stories_dbo.StoryTypes_StoryTypeID] FOREIGN KEY ([StoryTypeID]) REFERENCES [dbo].[StoryTypes] ([ID]) ON DELETE CASCADE
ALTER TABLE [dbo].[StoryFeedbacks] ADD CONSTRAINT [FK_dbo.StoryFeedbacks_dbo.Stories_StoryID] FOREIGN KEY ([StoryID]) REFERENCES [dbo].[Stories] ([ID]) ON DELETE CASCADE
ALTER TABLE [dbo].[SubTopics] ADD CONSTRAINT [FK_dbo.SubTopics_dbo.Topics_TopicID] FOREIGN KEY ([TopicID]) REFERENCES [dbo].[Topics] ([ID]) ON DELETE CASCADE
ALTER TABLE [dbo].[TopicStories] ADD CONSTRAINT [FK_dbo.TopicStories_dbo.Topics_Topic_ID] FOREIGN KEY ([Topic_ID]) REFERENCES [dbo].[Topics] ([ID]) ON DELETE CASCADE
ALTER TABLE [dbo].[TopicStories] ADD CONSTRAINT [FK_dbo.TopicStories_dbo.Stories_Story_ID] FOREIGN KEY ([Story_ID]) REFERENCES [dbo].[Stories] ([ID]) ON DELETE CASCADE
CREATE TABLE [dbo].[__MigrationHistory] (
    [MigrationId] [nvarchar](150) NOT NULL,
    [ContextKey] [nvarchar](300) NOT NULL,
    [Model] [varbinary](max) NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
)
INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
VALUES (N'201601061213169_Initial', N'SpaceDataModel.Migrations.Configuration',  0x1F8B0800000000000400ED5CDB6EDB3618BE1FB0771074B50D699CA41BB005768BD44906634D52C44EB1BB80966847A844B92215D818F664BBD823ED1546EA48F12051F2294983015B2D923F7FFE07FE077EEB7FFFFCDB7FBF0C7CEB1146D80BD1C03E3E3CB22D889CD0F5D07C60C764F6E657FBFDBBEFBFEB5FB8C1D2FA9CCF7BCBE6D195080FEC074216A7BD1E761E6000F061E0395188C3193974C2A007DCB0777274F45BEFF8B80729099BD2B2ACFE6D8C8817C0E407FD390C9103172406FE55E8421F67DFE9C838A16A5D8300E20570E0C01EB3FF9C030292A9B675E67B80723186FECCB60042210184F2787A87E19844219AD305C403FE64B58074DE0CF81866BC9F96D34D8F7174C28ED12B17E6A49C1893306849F0F86D26979EB8BC9374ED426E54721754C264C54E9D488F4A8884D1CAB6C49D4E877EC46689921DFA0063880F9365079672F0A0B0086A38EC9F036B18FB248EE000C19844C03FB03EC553DF73FE80AB49F805A2018A7D9FE793724AC72A1FE8A74F51B8801159DDC259C6FDE8DCB67AD5753D7161B18C5B931E6D84C8DB13DBBAA69B83A90F0B33E0C4C0CE097F8708468040F713200446548B23172682947617F69A78C487F976D4F0A8FFD8D615587E84684E1E0636FDA36D5D7A4BE8E65F3216EE9047DD8D2E22510C152CD66F4B3D87500637B071FD3E54F3701841269A7C2FF669429DB835CF6CE1478009B5246FE66D806062A28C46B3C20542D7E0D19B27FA5791BC84D09D02E70BB6AD5BE827D3F083B7482F9BD431EEC589975118DC867E4E4218BF1F8771E4303B096B264D403487A425B3ECDC4D7CA673942CB2A13AEE92F1B68C4DC285E7A8A5970C25A43D58115B65A0D831E7A83A9AF3CBF3D3EF95375FF37D980BBDE3BD982F7FBD1F8D7CB4B57F0A446E292BEC7A5B87C6300C826FECC66CE712E925D1C91DD884575768D226FBF786CDCF58C3C9FDD95EBBC9B257CDAEA9D99F7F39EA72B1D4C6FD247A768FAF62C457475F6386E2694DC8CF47EF3323E4F290CA8814F485E1F5A27E46ABC30D97AD7C75833D5C708A828BE96273097F6614EB98AD943DABADDAC46CCF300E1D2FE1840FCD62B5513DDB05722D93D223D54B511A50DD503BF516D432292703FBD8162DF0069D431F12689D39696B6308B0035C59BAF4346E2B9E0A4F17782AD3F22A6F3F495B52AF8011334BE0D35A18533FF310915DC8438EB700BE817C84B5860EC80E5FEC228E9CC30544CC770C4461B27D914BCB3C145B098A691253BFC7999CB12526A9A281C2ABC56583FDC93AD6D3D4D94F9AC36ED1AED7353B9EFBDD5A1CAF0B6363CB9B2B7B31B86A2AA3330D4D5E531A46767D9B1B9BA613D1CE7CDB385635D0687D40137538BE8A1CA785676952B006F93D01A75232BE0B9F52EAC164E32275D9813BA5F9056B13D31530CA4D2DC9603F24DDE32551E4C2771866E930CED231D17018D93124622952E6335527910C4F5ECFB751D564CAB4C0845CC2BD8E541A211AC8E4C58C4422F385262ECA724866A2F0518108A747E13C52AF999B5AD793168DCC304F2C4EC369573258C3FC4EA0C51F42BC15AAE76F279B54A9B562915316A3A4A5BB302A798A2887CC44D7968150EDCB12A889A1065194633B37E89AC3ABE366B304BBE85EA8CD14AAAF09AA26619567BB74E73AD5AB0369A3086B4E9F5789C52D5EBE8FF7D207F2FC21BDA77949EF5F81C582D6E1DCCB7AF6256D66D028FD66DCFECD394869F41CAC787A2EB82D76A26A0773288CB28EBC0B2FBD0813D652990256B50FDD409A26C42CCDD59B6F560D4BB2BAF2EB389FCFFECCC7C6BCBB93C52F39AC670B2FE991D87B42723A28FAB7BC2EC134001F448AFECC30F4E300E99313FDEAECF59927907D32A7513C25F3548A8FE6742A0F1F3CADCA403B7AD5C70F916875D49C72A5B4E189D6D63CCCCD04E54B699C645F52EA5B35576363AE0DEBED6CBA48A63ADAB67EFD766CBCE87A489A6A47277F44E4C9E4DFDA784BF68C58F596ECE373F6967D5A779A0FAD6BD9AA1CCFD4AAD56BB763D1699F9C5F9F7E79323AC9329535F4A1CCBA0C74A159F78DEAA1CC3CD7718DBCE2ECE019DAA5FB56883621CA5B2C959448D777D9BE62ABB9BDC2CBCAE2ADDE97CA794A9751669DAC3A51C947ACF364A918E936A5A5EE67713BB7654ADBC933622AADC0DB31259660B226A54A4C9C52D85151910995573FAB829A81CE5259944EB12DCAFBA3E72625D10A13181CB20987E3AFFED0F792EC239F700590378398A4AFCDF6C9D1F18980977E3AD8E51EC6AEAFA82225007355633B782FF798481B5FC45B22BA2A7061F40822E701443F0460F9E3BA10602DB18EA03597FE209B04AD7526A880F926BA919AD723E4C2E5C0FE2B59776A8DFEBCE7961E583711F58D53EBC8FA7BA3B839753DF46C2D54006CB692742B29CB5B57619EC9CEEB813C5F8A4F740072BE0C63E411452D94D91216F97265D5ECBA77C8FB1AC3E4E38135C2E9CF536B4265CA3C5844316E44EAEAB2E24509BED38D2340DB4CAFDE6CD936029CAEB630D3554D81A0C19B282637ABB7DCA683DCEED78C5925DB1DE265BBCDB7091ADC2F3CB07CDFDF0720706740AC9ACEFBB306FBA5CFEF3BC7E2B536E14D1A8DA6D7BC1DC3798E803D657349440BEC186826EC2E9B0DFF792BB6A3EBC46EDC6EF45DC1B6A17AF796A3EA003E9980B52FCBD959A86A6939750DD75D042A33F0EC7E6F9B12F4D709ADFBB46F9A9AF7A5A70881955147A2D61490523DBE356DCE0F6C771A52EDA6B9BB0EE7560B7E6DC6BEEAB6AA41556AF1B1F5F058ED4E6ADCA2123EAB47CFAAA86BB0713A646D2DB056C9BD0EC3A7665EA7747E507B0C9DFA778EF09571A7CDE055D11C15B89FA708DDE56D5A0075341EB9594CEB22730B5469034057F3202BC7310931D188CB954FCA7FDEF07173F06BD371D54FBD6B9AF12E8EBB41FC71178D8AD76015ACB11580B1FC7C4D2333F7B779D1B4007BF39204FBBBBD10742A31B9983342B330CF0D048EF229429BED0A12E0D2807D16116F061C42871D8871F25CF419F8319D72114CA13B42373159C4841E190653BFA26B9662D4ED9FA0A8AB3CF76F16C9FF15BC892350363DF6DE73833EC49EEF167C5F2A3A7D1A122C77C91AD74C978435B0E7AB82D275880C0965E22B52AE090C163E25866FD0183CC22EBCDD61F811CE81B3CA51087A22CD8AA88ABD7FEE817904029CD128D7D39FD486DD60F9EE7FB78CB50CD44E0000 , N'6.1.3-40302')

